{"dependencies":[{"name":"../currentScopes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":48,"index":48}}],"key":"4IMzW1L9FGOQbFYVibN4P3pVG0E=","exportNames":["*"]}},{"name":"../integration.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":49},"end":{"line":2,"column":54,"index":103}}],"key":"B8aKvpmafw58aWtupuC7GWTMiwo=","exportNames":["*"]}},{"name":"../utils-hoist/object.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":63,"index":167}}],"key":"IWRGqGXR51VGNaoabCqwsNvBzK0=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.functionToStringIntegration = void 0;\n  var _currentScopes = require(_dependencyMap[0], \"../currentScopes.js\");\n  var _integration = require(_dependencyMap[1], \"../integration.js\");\n  var _object = require(_dependencyMap[2], \"../utils-hoist/object.js\");\n  let originalFunctionToString;\n  const INTEGRATION_NAME = 'FunctionToString';\n  const SETUP_CLIENTS = new WeakMap();\n  const _functionToStringIntegration = () => {\n    return {\n      name: INTEGRATION_NAME,\n      setupOnce() {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        originalFunctionToString = Function.prototype.toString;\n\n        // intrinsics (like Function.prototype) might be immutable in some environments\n        // e.g. Node with --frozen-intrinsics, XS (an embedded JavaScript engine) or SES (a JavaScript proposal)\n        try {\n          Function.prototype.toString = function (...args) {\n            const originalFunction = (0, _object.getOriginalFunction)(this);\n            const context = SETUP_CLIENTS.has((0, _currentScopes.getClient)()) && originalFunction !== undefined ? originalFunction : this;\n            return originalFunctionToString.apply(context, args);\n          };\n        } catch (e) {\n          // ignore errors here, just don't patch this\n        }\n      },\n      setup(client) {\n        SETUP_CLIENTS.set(client, true);\n      }\n    };\n  };\n\n  /**\n   * Patch toString calls to return proper name for wrapped functions.\n   *\n   * ```js\n   * Sentry.init({\n   *   integrations: [\n   *     functionToStringIntegration(),\n   *   ],\n   * });\n   * ```\n   */\n  const functionToStringIntegration = exports.functionToStringIntegration = (0, _integration.defineIntegration)(_functionToStringIntegration);\n});","lineCount":49,"map":[[6,2,1,0],[6,6,1,0,"_currentScopes"],[6,20,1,0],[6,23,1,0,"require"],[6,30,1,0],[6,31,1,0,"_dependencyMap"],[6,45,1,0],[7,2,2,0],[7,6,2,0,"_integration"],[7,18,2,0],[7,21,2,0,"require"],[7,28,2,0],[7,29,2,0,"_dependencyMap"],[7,43,2,0],[8,2,3,0],[8,6,3,0,"_object"],[8,13,3,0],[8,16,3,0,"require"],[8,23,3,0],[8,24,3,0,"_dependencyMap"],[8,38,3,0],[9,2,5,0],[9,6,5,4,"originalFunctionToString"],[9,30,5,28],[10,2,7,0],[10,8,7,6,"INTEGRATION_NAME"],[10,24,7,22],[10,27,7,25],[10,45,7,43],[11,2,9,0],[11,8,9,6,"SETUP_CLIENTS"],[11,21,9,19],[11,24,9,22],[11,28,9,26,"WeakMap"],[11,35,9,33],[11,36,9,34],[11,37,9,35],[12,2,11,0],[12,8,11,6,"_functionToStringIntegration"],[12,36,11,34],[12,39,11,38,"_functionToStringIntegration"],[12,40,11,38],[12,45,11,44],[13,4,12,2],[13,11,12,9],[14,6,13,4,"name"],[14,10,13,8],[14,12,13,10,"INTEGRATION_NAME"],[14,28,13,26],[15,6,14,4,"setupOnce"],[15,15,14,13,"setupOnce"],[15,16,14,13],[15,18,14,16],[16,8,15,6],[17,8,16,6,"originalFunctionToString"],[17,32,16,30],[17,35,16,33,"Function"],[17,43,16,41],[17,44,16,42,"prototype"],[17,53,16,51],[17,54,16,52,"toString"],[17,62,16,60],[19,8,18,6],[20,8,19,6],[21,8,20,6],[21,12,20,10],[22,10,21,8,"Function"],[22,18,21,16],[22,19,21,17,"prototype"],[22,28,21,26],[22,29,21,27,"toString"],[22,37,21,35],[22,40,21,38],[22,50,21,49],[22,53,21,52,"args"],[22,57,21,56],[22,59,21,58],[23,12,22,10],[23,18,22,16,"originalFunction"],[23,34,22,32],[23,37,22,35],[23,41,22,35,"getOriginalFunction"],[23,68,22,54],[23,70,22,55],[23,74,22,59],[23,75,22,60],[24,12,23,10],[24,18,23,16,"context"],[24,25,23,23],[24,28,24,12,"SETUP_CLIENTS"],[24,41,24,25],[24,42,24,26,"has"],[24,45,24,29],[24,46,24,30],[24,50,24,30,"getClient"],[24,74,24,39],[24,76,24,40],[24,77,24,42],[24,78,24,43],[24,82,24,47,"originalFunction"],[24,98,24,63],[24,103,24,68,"undefined"],[24,112,24,77],[24,115,24,80,"originalFunction"],[24,131,24,96],[24,134,24,99],[24,138,24,103],[25,12,25,10],[25,19,25,17,"originalFunctionToString"],[25,43,25,41],[25,44,25,42,"apply"],[25,49,25,47],[25,50,25,48,"context"],[25,57,25,55],[25,59,25,57,"args"],[25,63,25,61],[25,64,25,62],[26,10,26,8],[26,11,26,9],[27,8,27,6],[27,9,27,7],[27,10,27,8],[27,17,27,15,"e"],[27,18,27,16],[27,20,27,18],[28,10,28,8],[29,8,28,8],[30,6,30,4],[30,7,30,5],[31,6,31,4,"setup"],[31,11,31,9,"setup"],[31,12,31,10,"client"],[31,18,31,16],[31,20,31,18],[32,8,32,6,"SETUP_CLIENTS"],[32,21,32,19],[32,22,32,20,"set"],[32,25,32,23],[32,26,32,24,"client"],[32,32,32,30],[32,34,32,32],[32,38,32,36],[32,39,32,37],[33,6,33,4],[34,4,34,2],[34,5,34,3],[35,2,35,0],[35,3,35,2],[37,2,37,0],[38,0,38,0],[39,0,39,0],[40,0,40,0],[41,0,41,0],[42,0,42,0],[43,0,43,0],[44,0,44,0],[45,0,45,0],[46,0,46,0],[47,0,47,0],[48,2,48,0],[48,8,48,6,"functionToStringIntegration"],[48,35,48,33],[48,38,48,33,"exports"],[48,45,48,33],[48,46,48,33,"functionToStringIntegration"],[48,73,48,33],[48,76,48,36],[48,80,48,36,"defineIntegration"],[48,110,48,53],[48,112,48,54,"_functionToStringIntegration"],[48,140,48,82],[48,141,48,83],[49,0,48,84],[49,3]],"functionMap":{"names":["<global>","_functionToStringIntegration","setupOnce","Function.prototype.toString","setup"],"mappings":"AAA;sCCU;ICG;sCCO;SDK;KDI;IGC;KHE;CDE"}},"type":"js/module"}]}