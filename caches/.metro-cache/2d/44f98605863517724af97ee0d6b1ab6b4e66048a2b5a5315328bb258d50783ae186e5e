{"dependencies":[{"name":"../../../types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"How8xsoS0dUDpKnVy0jHSdmxOM4=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.onHidden = void 0;\n  var _types = require(_dependencyMap[0], \"../../../types.js\");\n  /*\n   * Copyright 2020 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  // Sentry-specific change:\n  // This function's logic was NOT updated to web-vitals 4.2.4 but we continue\n  // to use the web-vitals 3.5.2 due to us having stricter browser support.\n  // PR with context that made the changes: https://github.com/GoogleChrome/web-vitals/pull/442/files#r1530492402\n  // The PR removed listening to the `pagehide` event, in favour of only listening to `visibilitychange` event.\n  // This is \"more correct\" but some browsers we still support (Safari 12.1-14.0) don't fully support `visibilitychange`\n  // or have known bugs w.r.t the `visibilitychange` event.\n  // TODO (v9): If we decide to drop support for Safari 12.1-14.0, we can use the logic from web-vitals 4.2.4\n  // In this case, we also need to update the integration tests that currently trigger the `pagehide` event to\n  // simulate the page being hidden.\n  const onHidden = cb => {\n    const onHiddenOrPageHide = event => {\n      if (event.type === 'pagehide' || _types.WINDOW.document && _types.WINDOW.document.visibilityState === 'hidden') {\n        cb(event);\n      }\n    };\n    if (_types.WINDOW.document) {\n      addEventListener('visibilitychange', onHiddenOrPageHide, true);\n      // Some browsers have buggy implementations of visibilitychange,\n      // so we use pagehide in addition, just to be safe.\n      addEventListener('pagehide', onHiddenOrPageHide, true);\n    }\n  };\n  exports.onHidden = onHidden;\n});","lineCount":47,"map":[[6,2,1,0],[6,6,1,0,"_types"],[6,12,1,0],[6,15,1,0,"require"],[6,22,1,0],[6,23,1,0,"_dependencyMap"],[6,37,1,0],[7,2,3,0],[8,0,4,0],[9,0,5,0],[10,0,6,0],[11,0,7,0],[12,0,8,0],[13,0,9,0],[14,0,10,0],[15,0,11,0],[16,0,12,0],[17,0,13,0],[18,0,14,0],[19,0,15,0],[20,0,16,0],[21,0,17,0],[23,2,20,0],[24,2,21,0],[25,2,22,0],[26,2,23,0],[27,2,24,0],[28,2,25,0],[29,2,26,0],[30,2,27,0],[31,2,28,0],[32,2,29,0],[33,2,30,0],[33,8,30,6,"onHidden"],[33,16,30,14],[33,19,30,18,"cb"],[33,21,30,20],[33,25,30,25],[34,4,31,2],[34,10,31,8,"onHiddenOrPageHide"],[34,28,31,26],[34,31,31,30,"event"],[34,36,31,35],[34,40,31,40],[35,6,32,4],[35,10,32,8,"event"],[35,15,32,13],[35,16,32,14,"type"],[35,20,32,18],[35,25,32,23],[35,35,32,33],[35,39,32,38,"WINDOW"],[35,52,32,44],[35,53,32,45,"document"],[35,61,32,53],[35,65,32,57,"WINDOW"],[35,78,32,63],[35,79,32,64,"document"],[35,87,32,72],[35,88,32,73,"visibilityState"],[35,103,32,88],[35,108,32,93],[35,116,32,102],[35,118,32,104],[36,8,33,6,"cb"],[36,10,33,8],[36,11,33,9,"event"],[36,16,33,14],[36,17,33,15],[37,6,34,4],[38,4,35,2],[38,5,35,3],[39,4,37,2],[39,8,37,6,"WINDOW"],[39,21,37,12],[39,22,37,13,"document"],[39,30,37,21],[39,32,37,23],[40,6,38,4,"addEventListener"],[40,22,38,20],[40,23,38,21],[40,41,38,39],[40,43,38,41,"onHiddenOrPageHide"],[40,61,38,59],[40,63,38,61],[40,67,38,65],[40,68,38,66],[41,6,39,4],[42,6,40,4],[43,6,41,4,"addEventListener"],[43,22,41,20],[43,23,41,21],[43,33,41,31],[43,35,41,33,"onHiddenOrPageHide"],[43,53,41,51],[43,55,41,53],[43,59,41,57],[43,60,41,58],[44,4,42,2],[45,2,43,0],[45,3,43,1],[46,2,43,2,"exports"],[46,9,43,2],[46,10,43,2,"onHidden"],[46,18,43,2],[46,21,43,2,"onHidden"],[46,29,43,2],[47,0,43,2],[47,3]],"functionMap":{"names":["<global>","onHidden","onHiddenOrPageHide"],"mappings":"AAA;iBC6B;6BCC;GDI;CDQ"}},"type":"js/module"}]}