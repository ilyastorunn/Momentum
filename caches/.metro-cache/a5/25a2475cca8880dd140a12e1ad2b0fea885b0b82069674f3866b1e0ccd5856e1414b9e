{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":63,"index":63}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"]}},{"name":"../../../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":64},"end":{"line":2,"column":54,"index":118}}],"key":"ICtV6jFYCSAzqvGpRIHaV/Jobv0=","exportNames":["*"]}},{"name":"../../../utils/featureFlags.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":119},"end":{"line":3,"column":94,"index":213}}],"key":"rZi75susrW6b4U5MRcW9aF3kKeg=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.unleashIntegration = void 0;\n  var _core = require(_dependencyMap[0], \"@sentry/core\");\n  var _debugBuild = require(_dependencyMap[1], \"../../../debug-build.js\");\n  var _featureFlags = require(_dependencyMap[2], \"../../../utils/featureFlags.js\");\n  /**\n   * Sentry integration for capturing feature flag evaluations from the Unleash SDK.\n   *\n   * See the [feature flag documentation](https://develop.sentry.dev/sdk/expected-features/#feature-flags) for more information.\n   *\n   * @example\n   * ```\n   * import { UnleashClient } from 'unleash-proxy-client';\n   * import * as Sentry from '@sentry/browser';\n   *\n   * Sentry.init({\n   *   dsn: '___PUBLIC_DSN___',\n   *   integrations: [Sentry.unleashIntegration({unleashClientClass: UnleashClient})],\n   * });\n   *\n   * const unleash = new UnleashClient(...);\n   * unleash.start();\n   *\n   * unleash.isEnabled('my-feature');\n   * unleash.getVariant('other-feature');\n   * Sentry.captureException(new Error('something went wrong'));\n   * ```\n   */\n  const unleashIntegration = exports.unleashIntegration = (0, _core.defineIntegration)(({\n    unleashClientClass\n  }) => {\n    return {\n      name: 'Unleash',\n      processEvent(event, _hint, _client) {\n        return (0, _featureFlags.copyFlagsFromScopeToEvent)(event);\n      },\n      setupOnce() {\n        const unleashClientPrototype = unleashClientClass.prototype;\n        (0, _core.fill)(unleashClientPrototype, 'isEnabled', _wrappedIsEnabled);\n      }\n    };\n  });\n\n  /**\n   * Wraps the UnleashClient.isEnabled method to capture feature flag evaluations. Its only side effect is writing to Sentry scope.\n   *\n   * This wrapper is safe for all isEnabled signatures. If the signature does not match (this: UnleashClient, toggleName: string, ...args: unknown[]) => boolean,\n   * we log an error and return the original result.\n   *\n   * @param original - The original method.\n   * @returns Wrapped method. Results should match the original.\n   */\n  function _wrappedIsEnabled(original) {\n    return function (...args) {\n      const toggleName = args[0];\n      const result = original.apply(this, args);\n      if (typeof toggleName === 'string' && typeof result === 'boolean') {\n        (0, _featureFlags.insertFlagToScope)(toggleName, result);\n      } else if (_debugBuild.DEBUG_BUILD) {\n        _core.logger.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${toggleName} (${typeof toggleName}), result: ${result} (${typeof result})`);\n      }\n      return result;\n    };\n  }\n});","lineCount":68,"map":[[6,2,1,0],[6,6,1,0,"_core"],[6,11,1,0],[6,14,1,0,"require"],[6,21,1,0],[6,22,1,0,"_dependencyMap"],[6,36,1,0],[7,2,2,0],[7,6,2,0,"_debugBuild"],[7,17,2,0],[7,20,2,0,"require"],[7,27,2,0],[7,28,2,0,"_dependencyMap"],[7,42,2,0],[8,2,3,0],[8,6,3,0,"_featureFlags"],[8,19,3,0],[8,22,3,0,"require"],[8,29,3,0],[8,30,3,0,"_dependencyMap"],[8,44,3,0],[9,2,5,0],[10,0,6,0],[11,0,7,0],[12,0,8,0],[13,0,9,0],[14,0,10,0],[15,0,11,0],[16,0,12,0],[17,0,13,0],[18,0,14,0],[19,0,15,0],[20,0,16,0],[21,0,17,0],[22,0,18,0],[23,0,19,0],[24,0,20,0],[25,0,21,0],[26,0,22,0],[27,0,23,0],[28,0,24,0],[29,0,25,0],[30,0,26,0],[31,0,27,0],[32,2,28,0],[32,8,28,6,"unleashIntegration"],[32,26,28,24],[32,29,28,24,"exports"],[32,36,28,24],[32,37,28,24,"unleashIntegration"],[32,55,28,24],[32,58,28,27],[32,62,28,27,"defineIntegration"],[32,85,28,44],[32,87,29,2],[32,88,29,3],[33,4,29,5,"unleashClientClass"],[34,2,29,24],[34,3,29,25],[34,8,29,30],[35,4,30,4],[35,11,30,11],[36,6,31,6,"name"],[36,10,31,10],[36,12,31,12],[36,21,31,21],[37,6,33,6,"processEvent"],[37,18,33,18,"processEvent"],[37,19,33,19,"event"],[37,24,33,24],[37,26,33,26,"_hint"],[37,31,33,31],[37,33,33,33,"_client"],[37,40,33,40],[37,42,33,42],[38,8,34,8],[38,15,34,15],[38,19,34,15,"copyFlagsFromScopeToEvent"],[38,58,34,40],[38,60,34,41,"event"],[38,65,34,46],[38,66,34,47],[39,6,35,6],[39,7,35,7],[40,6,37,6,"setupOnce"],[40,15,37,15,"setupOnce"],[40,16,37,15],[40,18,37,18],[41,8,38,8],[41,14,38,14,"unleashClientPrototype"],[41,36,38,36],[41,39,38,39,"unleashClientClass"],[41,57,38,57],[41,58,38,58,"prototype"],[41,67,38,67],[42,8,39,8],[42,12,39,8,"fill"],[42,22,39,12],[42,24,39,13,"unleashClientPrototype"],[42,46,39,35],[42,48,39,37],[42,59,39,48],[42,61,39,50,"_wrappedIsEnabled"],[42,78,39,67],[42,79,39,68],[43,6,40,6],[44,4,41,4],[44,5,41,5],[45,2,42,2],[45,3,43,0],[45,4,43,1],[47,2,45,0],[48,0,46,0],[49,0,47,0],[50,0,48,0],[51,0,49,0],[52,0,50,0],[53,0,51,0],[54,0,52,0],[55,0,53,0],[56,2,54,0],[56,11,54,9,"_wrappedIsEnabled"],[56,28,54,26,"_wrappedIsEnabled"],[56,29,55,2,"original"],[56,37,55,10],[56,39,56,2],[57,4,57,2],[57,11,57,9],[57,21,57,20],[57,24,57,23,"args"],[57,28,57,27],[57,30,57,29],[58,6,58,4],[58,12,58,10,"toggleName"],[58,22,58,20],[58,25,58,23,"args"],[58,29,58,27],[58,30,58,28],[58,31,58,29],[58,32,58,30],[59,6,59,4],[59,12,59,10,"result"],[59,18,59,16],[59,21,59,19,"original"],[59,29,59,27],[59,30,59,28,"apply"],[59,35,59,33],[59,36,59,34],[59,40,59,38],[59,42,59,40,"args"],[59,46,59,44],[59,47,59,45],[60,6,61,4],[60,10,61,8],[60,17,61,15,"toggleName"],[60,27,61,25],[60,32,61,30],[60,40,61,38],[60,44,61,42],[60,51,61,49,"result"],[60,57,61,55],[60,62,61,60],[60,71,61,69],[60,73,61,71],[61,8,62,6],[61,12,62,6,"insertFlagToScope"],[61,43,62,23],[61,45,62,24,"toggleName"],[61,55,62,34],[61,57,62,36,"result"],[61,63,62,42],[61,64,62,43],[62,6,63,4],[62,7,63,5],[62,13,63,11],[62,17,63,15,"DEBUG_BUILD"],[62,40,63,26],[62,42,63,28],[63,8,64,6,"logger"],[63,20,64,12],[63,21,64,13,"error"],[63,26,64,18],[63,27,65,8],[63,111,65,92,"toggleName"],[63,121,65,102],[63,126,65,107],[63,133,65,114,"toggleName"],[63,143,65,124],[63,157,65,138,"result"],[63,163,65,144],[63,168,65,149],[63,175,65,156,"result"],[63,181,65,162],[63,184,66,6],[63,185,66,7],[64,6,67,4],[65,6,68,4],[65,13,68,11,"result"],[65,19,68,17],[66,4,69,2],[66,5,69,3],[67,2,70,0],[68,0,70,1],[68,3]],"functionMap":{"names":["<global>","defineIntegration$argument_0","processEvent","setupOnce","_wrappedIsEnabled","<anonymous>"],"mappings":"AAA;EC4B;MCI;ODE;MEE;OFG;GDE;AIY;SCG;GDY;CJC"}},"type":"js/module"}]}