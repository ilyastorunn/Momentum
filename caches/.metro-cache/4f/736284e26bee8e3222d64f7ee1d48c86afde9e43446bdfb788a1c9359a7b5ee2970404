{"dependencies":[{"name":"./utils-hoist/dsn.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":60,"index":60}}],"key":"0dkDQ3JT6WMpnFh2RpIJM2X12ZQ=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getEnvelopeEndpointWithUrlEncodedAuth = getEnvelopeEndpointWithUrlEncodedAuth;\n  exports.getReportDialogEndpoint = getReportDialogEndpoint;\n  var _dsn = require(_dependencyMap[0], \"./utils-hoist/dsn.js\");\n  const SENTRY_API_VERSION = '7';\n\n  /** Returns the prefix to construct Sentry ingestion API endpoints. */\n  function getBaseApiEndpoint(dsn) {\n    const protocol = dsn.protocol ? `${dsn.protocol}:` : '';\n    const port = dsn.port ? `:${dsn.port}` : '';\n    return `${protocol}//${dsn.host}${port}${dsn.path ? `/${dsn.path}` : ''}/api/`;\n  }\n\n  /** Returns the ingest API endpoint for target. */\n  function _getIngestEndpoint(dsn) {\n    return `${getBaseApiEndpoint(dsn)}${dsn.projectId}/envelope/`;\n  }\n\n  /** Returns a URL-encoded string with auth config suitable for a query string. */\n  function _encodedAuth(dsn, sdkInfo) {\n    const params = {\n      sentry_version: SENTRY_API_VERSION\n    };\n    if (dsn.publicKey) {\n      // We send only the minimum set of required information. See\n      // https://github.com/getsentry/sentry-javascript/issues/2572.\n      params.sentry_key = dsn.publicKey;\n    }\n    if (sdkInfo) {\n      params.sentry_client = `${sdkInfo.name}/${sdkInfo.version}`;\n    }\n    return new URLSearchParams(params).toString();\n  }\n\n  /**\n   * Returns the envelope endpoint URL with auth in the query string.\n   *\n   * Sending auth as part of the query string and not as custom HTTP headers avoids CORS preflight requests.\n   */\n  function getEnvelopeEndpointWithUrlEncodedAuth(dsn, tunnel, sdkInfo) {\n    return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, sdkInfo)}`;\n  }\n\n  /** Returns the url to the report dialog endpoint. */\n  function getReportDialogEndpoint(dsnLike, dialogOptions) {\n    const dsn = (0, _dsn.makeDsn)(dsnLike);\n    if (!dsn) {\n      return '';\n    }\n    const endpoint = `${getBaseApiEndpoint(dsn)}embed/error-page/`;\n    let encodedOptions = `dsn=${(0, _dsn.dsnToString)(dsn)}`;\n    for (const key in dialogOptions) {\n      if (key === 'dsn') {\n        continue;\n      }\n      if (key === 'onClose') {\n        continue;\n      }\n      if (key === 'user') {\n        const user = dialogOptions.user;\n        if (!user) {\n          continue;\n        }\n        if (user.name) {\n          encodedOptions += `&name=${encodeURIComponent(user.name)}`;\n        }\n        if (user.email) {\n          encodedOptions += `&email=${encodeURIComponent(user.email)}`;\n        }\n      } else {\n        encodedOptions += `&${encodeURIComponent(key)}=${encodeURIComponent(dialogOptions[key])}`;\n      }\n    }\n    return `${endpoint}?${encodedOptions}`;\n  }\n});","lineCount":79,"map":[[7,2,1,0],[7,6,1,0,"_dsn"],[7,10,1,0],[7,13,1,0,"require"],[7,20,1,0],[7,21,1,0,"_dependencyMap"],[7,35,1,0],[8,2,3,0],[8,8,3,6,"SENTRY_API_VERSION"],[8,26,3,24],[8,29,3,27],[8,32,3,30],[10,2,5,0],[11,2,6,0],[11,11,6,9,"getBaseApiEndpoint"],[11,29,6,27,"getBaseApiEndpoint"],[11,30,6,28,"dsn"],[11,33,6,31],[11,35,6,33],[12,4,7,2],[12,10,7,8,"protocol"],[12,18,7,16],[12,21,7,19,"dsn"],[12,24,7,22],[12,25,7,23,"protocol"],[12,33,7,31],[12,36,7,34],[12,39,7,37,"dsn"],[12,42,7,40],[12,43,7,41,"protocol"],[12,51,7,49],[12,54,7,52],[12,57,7,55],[12,59,7,57],[13,4,8,2],[13,10,8,8,"port"],[13,14,8,12],[13,17,8,15,"dsn"],[13,20,8,18],[13,21,8,19,"port"],[13,25,8,23],[13,28,8,26],[13,32,8,30,"dsn"],[13,35,8,33],[13,36,8,34,"port"],[13,40,8,38],[13,42,8,40],[13,45,8,43],[13,47,8,45],[14,4,9,2],[14,11,9,9],[14,14,9,12,"protocol"],[14,22,9,20],[14,27,9,25,"dsn"],[14,30,9,28],[14,31,9,29,"host"],[14,35,9,33],[14,38,9,36,"port"],[14,42,9,40],[14,45,9,43,"dsn"],[14,48,9,46],[14,49,9,47,"path"],[14,53,9,51],[14,56,9,54],[14,60,9,58,"dsn"],[14,63,9,61],[14,64,9,62,"path"],[14,68,9,66],[14,70,9,68],[14,73,9,71],[14,75,9,73],[14,82,9,80],[15,2,10,0],[17,2,12,0],[18,2,13,0],[18,11,13,9,"_getIngestEndpoint"],[18,29,13,27,"_getIngestEndpoint"],[18,30,13,28,"dsn"],[18,33,13,31],[18,35,13,33],[19,4,14,2],[19,11,14,9],[19,14,14,12,"getBaseApiEndpoint"],[19,32,14,30],[19,33,14,31,"dsn"],[19,36,14,34],[19,37,14,35],[19,40,14,38,"dsn"],[19,43,14,41],[19,44,14,42,"projectId"],[19,53,14,51],[19,65,14,63],[20,2,15,0],[22,2,17,0],[23,2,18,0],[23,11,18,9,"_encodedAuth"],[23,23,18,21,"_encodedAuth"],[23,24,18,22,"dsn"],[23,27,18,25],[23,29,18,27,"sdkInfo"],[23,36,18,34],[23,38,18,36],[24,4,19,2],[24,10,19,8,"params"],[24,16,19,14],[24,19,19,17],[25,6,20,4,"sentry_version"],[25,20,20,18],[25,22,20,20,"SENTRY_API_VERSION"],[26,4,21,2],[26,5,21,3],[27,4,23,2],[27,8,23,6,"dsn"],[27,11,23,9],[27,12,23,10,"publicKey"],[27,21,23,19],[27,23,23,21],[28,6,24,4],[29,6,25,4],[30,6,26,4,"params"],[30,12,26,10],[30,13,26,11,"sentry_key"],[30,23,26,21],[30,26,26,24,"dsn"],[30,29,26,27],[30,30,26,28,"publicKey"],[30,39,26,37],[31,4,27,2],[32,4,29,2],[32,8,29,6,"sdkInfo"],[32,15,29,13],[32,17,29,15],[33,6,30,4,"params"],[33,12,30,10],[33,13,30,11,"sentry_client"],[33,26,30,24],[33,29,30,27],[33,32,30,30,"sdkInfo"],[33,39,30,37],[33,40,30,38,"name"],[33,44,30,42],[33,48,30,46,"sdkInfo"],[33,55,30,53],[33,56,30,54,"version"],[33,63,30,61],[33,65,30,63],[34,4,31,2],[35,4,33,2],[35,11,33,9],[35,15,33,13,"URLSearchParams"],[35,30,33,28],[35,31,33,29,"params"],[35,37,33,35],[35,38,33,36],[35,39,33,37,"toString"],[35,47,33,45],[35,48,33,46],[35,49,33,47],[36,2,34,0],[38,2,36,0],[39,0,37,0],[40,0,38,0],[41,0,39,0],[42,0,40,0],[43,2,41,0],[43,11,41,9,"getEnvelopeEndpointWithUrlEncodedAuth"],[43,48,41,46,"getEnvelopeEndpointWithUrlEncodedAuth"],[43,49,41,47,"dsn"],[43,52,41,50],[43,54,41,52,"tunnel"],[43,60,41,58],[43,62,41,60,"sdkInfo"],[43,69,41,67],[43,71,41,69],[44,4,42,2],[44,11,42,9,"tunnel"],[44,17,42,15],[44,20,42,18,"tunnel"],[44,26,42,24],[44,29,42,27],[44,32,42,30,"_getIngestEndpoint"],[44,50,42,48],[44,51,42,49,"dsn"],[44,54,42,52],[44,55,42,53],[44,59,42,57,"_encodedAuth"],[44,71,42,69],[44,72,42,70,"dsn"],[44,75,42,73],[44,77,42,75,"sdkInfo"],[44,84,42,82],[44,85,42,83],[44,87,42,85],[45,2,43,0],[47,2,45,0],[48,2,46,0],[48,11,46,9,"getReportDialogEndpoint"],[48,34,46,32,"getReportDialogEndpoint"],[48,35,47,2,"dsnLike"],[48,42,47,9],[48,44,48,2,"dialogOptions"],[48,57,48,15],[48,59,51,2],[49,4,52,2],[49,10,52,8,"dsn"],[49,13,52,11],[49,16,52,14],[49,20,52,14,"makeDsn"],[49,32,52,21],[49,34,52,22,"dsnLike"],[49,41,52,29],[49,42,52,30],[50,4,53,2],[50,8,53,6],[50,9,53,7,"dsn"],[50,12,53,10],[50,14,53,12],[51,6,54,4],[51,13,54,11],[51,15,54,13],[52,4,55,2],[53,4,57,2],[53,10,57,8,"endpoint"],[53,18,57,16],[53,21,57,19],[53,24,57,22,"getBaseApiEndpoint"],[53,42,57,40],[53,43,57,41,"dsn"],[53,46,57,44],[53,47,57,45],[53,66,57,64],[54,4,59,2],[54,8,59,6,"encodedOptions"],[54,22,59,20],[54,25,59,23],[54,32,59,30],[54,36,59,30,"dsnToString"],[54,52,59,41],[54,54,59,42,"dsn"],[54,57,59,45],[54,58,59,46],[54,60,59,48],[55,4,60,2],[55,9,60,7],[55,15,60,13,"key"],[55,18,60,16],[55,22,60,20,"dialogOptions"],[55,35,60,33],[55,37,60,35],[56,6,61,4],[56,10,61,8,"key"],[56,13,61,11],[56,18,61,16],[56,23,61,21],[56,25,61,23],[57,8,62,6],[58,6,63,4],[59,6,65,4],[59,10,65,8,"key"],[59,13,65,11],[59,18,65,16],[59,27,65,25],[59,29,65,27],[60,8,66,6],[61,6,67,4],[62,6,69,4],[62,10,69,8,"key"],[62,13,69,11],[62,18,69,16],[62,24,69,22],[62,26,69,24],[63,8,70,6],[63,14,70,12,"user"],[63,18,70,16],[63,21,70,19,"dialogOptions"],[63,34,70,32],[63,35,70,33,"user"],[63,39,70,37],[64,8,71,6],[64,12,71,10],[64,13,71,11,"user"],[64,17,71,15],[64,19,71,17],[65,10,72,8],[66,8,73,6],[67,8,74,6],[67,12,74,10,"user"],[67,16,74,14],[67,17,74,15,"name"],[67,21,74,19],[67,23,74,21],[68,10,75,8,"encodedOptions"],[68,24,75,22],[68,28,75,26],[68,37,75,35,"encodeURIComponent"],[68,55,75,53],[68,56,75,54,"user"],[68,60,75,58],[68,61,75,59,"name"],[68,65,75,63],[68,66,75,64],[68,68,75,66],[69,8,76,6],[70,8,77,6],[70,12,77,10,"user"],[70,16,77,14],[70,17,77,15,"email"],[70,22,77,20],[70,24,77,22],[71,10,78,8,"encodedOptions"],[71,24,78,22],[71,28,78,26],[71,38,78,36,"encodeURIComponent"],[71,56,78,54],[71,57,78,55,"user"],[71,61,78,59],[71,62,78,60,"email"],[71,67,78,65],[71,68,78,66],[71,70,78,68],[72,8,79,6],[73,6,80,4],[73,7,80,5],[73,13,80,11],[74,8,81,6,"encodedOptions"],[74,22,81,20],[74,26,81,24],[74,30,81,28,"encodeURIComponent"],[74,48,81,46],[74,49,81,47,"key"],[74,52,81,50],[74,53,81,51],[74,57,81,55,"encodeURIComponent"],[74,75,81,73],[74,76,81,74,"dialogOptions"],[74,89,81,87],[74,90,81,88,"key"],[74,93,81,91],[74,94,81,93],[74,95,81,94],[74,97,81,96],[75,6,82,4],[76,4,83,2],[77,4,85,2],[77,11,85,9],[77,14,85,12,"endpoint"],[77,22,85,20],[77,26,85,24,"encodedOptions"],[77,40,85,38],[77,42,85,40],[78,2,86,0],[79,0,86,1],[79,3]],"functionMap":{"names":["<global>","getBaseApiEndpoint","_getIngestEndpoint","_encodedAuth","getEnvelopeEndpointWithUrlEncodedAuth","getReportDialogEndpoint"],"mappings":"AAA;ACK;CDI;AEG;CFE;AGG;CHgB;AIO;CJE;AKG;CLwC"}},"type":"js/module"}]}