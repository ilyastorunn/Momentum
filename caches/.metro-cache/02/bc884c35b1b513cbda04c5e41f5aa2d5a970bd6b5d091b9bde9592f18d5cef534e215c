{"dependencies":[{"name":"../wrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":681},"end":{"line":10,"column":36,"index":717}}],"key":"3qo6tWpJLamBuMFs5ex6CktRJQ4=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.screenshotIntegration = void 0;\n  var _wrapper = require(_dependencyMap[0], \"../wrapper\");\n  var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  const INTEGRATION_NAME = 'Screenshot';\n  /** Adds screenshots to error events */\n  const screenshotIntegration = () => {\n    return {\n      name: INTEGRATION_NAME,\n      setupOnce: () => {\n        // noop\n      },\n      processEvent\n    };\n  };\n  exports.screenshotIntegration = screenshotIntegration;\n  function processEvent(event, hint, client) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function* () {\n      const hasException = event.exception && event.exception.values && event.exception.values.length > 0;\n      if (!hasException || ((_b = (_a = client.getOptions()).beforeScreenshot) === null || _b === void 0 ? void 0 : _b.call(_a, event, hint)) === false) {\n        return event;\n      }\n      const screenshots = yield _wrapper.NATIVE.captureScreenshot();\n      if (screenshots && screenshots.length > 0) {\n        hint.attachments = [...screenshots, ...((hint === null || hint === void 0 ? void 0 : hint.attachments) || [])];\n      }\n      return event;\n    });\n  }\n});","lineCount":60,"map":[[6,2,10,0],[6,6,10,0,"_wrapper"],[6,14,10,0],[6,17,10,0,"require"],[6,24,10,0],[6,25,10,0,"_dependencyMap"],[6,39,10,0],[7,2,1,0],[7,6,1,4,"__awaiter"],[7,15,1,13],[7,18,1,17],[7,22,1,21],[7,26,1,25],[7,30,1,29],[7,31,1,30,"__awaiter"],[7,40,1,39],[7,44,1,44],[7,54,1,54,"thisArg"],[7,61,1,61],[7,63,1,63,"_arguments"],[7,73,1,73],[7,75,1,75,"P"],[7,76,1,76],[7,78,1,78,"generator"],[7,87,1,87],[7,89,1,89],[8,4,2,4],[8,13,2,13,"adopt"],[8,18,2,18,"adopt"],[8,19,2,19,"value"],[8,24,2,24],[8,26,2,26],[9,6,2,28],[9,13,2,35,"value"],[9,18,2,40],[9,30,2,52,"P"],[9,31,2,53],[9,34,2,56,"value"],[9,39,2,61],[9,42,2,64],[9,46,2,68,"P"],[9,47,2,69],[9,48,2,70],[9,58,2,80,"resolve"],[9,65,2,87],[9,67,2,89],[10,8,2,91,"resolve"],[10,15,2,98],[10,16,2,99,"value"],[10,21,2,104],[10,22,2,105],[11,6,2,107],[11,7,2,108],[11,8,2,109],[12,4,2,111],[13,4,3,4],[13,11,3,11],[13,16,3,16,"P"],[13,17,3,17],[13,22,3,22,"P"],[13,23,3,23],[13,26,3,26,"Promise"],[13,33,3,33],[13,34,3,34],[13,36,3,36],[13,46,3,46,"resolve"],[13,53,3,53],[13,55,3,55,"reject"],[13,61,3,61],[13,63,3,63],[14,6,4,8],[14,15,4,17,"fulfilled"],[14,24,4,26,"fulfilled"],[14,25,4,27,"value"],[14,30,4,32],[14,32,4,34],[15,8,4,36],[15,12,4,40],[16,10,4,42,"step"],[16,14,4,46],[16,15,4,47,"generator"],[16,24,4,56],[16,25,4,57,"next"],[16,29,4,61],[16,30,4,62,"value"],[16,35,4,67],[16,36,4,68],[16,37,4,69],[17,8,4,71],[17,9,4,72],[17,10,4,73],[17,17,4,80,"e"],[17,18,4,81],[17,20,4,83],[18,10,4,85,"reject"],[18,16,4,91],[18,17,4,92,"e"],[18,18,4,93],[18,19,4,94],[19,8,4,96],[20,6,4,98],[21,6,5,8],[21,15,5,17,"rejected"],[21,23,5,25,"rejected"],[21,24,5,26,"value"],[21,29,5,31],[21,31,5,33],[22,8,5,35],[22,12,5,39],[23,10,5,41,"step"],[23,14,5,45],[23,15,5,46,"generator"],[23,24,5,55],[23,25,5,56],[23,32,5,63],[23,33,5,64],[23,34,5,65,"value"],[23,39,5,70],[23,40,5,71],[23,41,5,72],[24,8,5,74],[24,9,5,75],[24,10,5,76],[24,17,5,83,"e"],[24,18,5,84],[24,20,5,86],[25,10,5,88,"reject"],[25,16,5,94],[25,17,5,95,"e"],[25,18,5,96],[25,19,5,97],[26,8,5,99],[27,6,5,101],[28,6,6,8],[28,15,6,17,"step"],[28,19,6,21,"step"],[28,20,6,22,"result"],[28,26,6,28],[28,28,6,30],[29,8,6,32,"result"],[29,14,6,38],[29,15,6,39,"done"],[29,19,6,43],[29,22,6,46,"resolve"],[29,29,6,53],[29,30,6,54,"result"],[29,36,6,60],[29,37,6,61,"value"],[29,42,6,66],[29,43,6,67],[29,46,6,70,"adopt"],[29,51,6,75],[29,52,6,76,"result"],[29,58,6,82],[29,59,6,83,"value"],[29,64,6,88],[29,65,6,89],[29,66,6,90,"then"],[29,70,6,94],[29,71,6,95,"fulfilled"],[29,80,6,104],[29,82,6,106,"rejected"],[29,90,6,114],[29,91,6,115],[30,6,6,117],[31,6,7,8,"step"],[31,10,7,12],[31,11,7,13],[31,12,7,14,"generator"],[31,21,7,23],[31,24,7,26,"generator"],[31,33,7,35],[31,34,7,36,"apply"],[31,39,7,41],[31,40,7,42,"thisArg"],[31,47,7,49],[31,49,7,51,"_arguments"],[31,59,7,61],[31,63,7,65],[31,65,7,67],[31,66,7,68],[31,68,7,70,"next"],[31,72,7,74],[31,73,7,75],[31,74,7,76],[31,75,7,77],[32,4,8,4],[32,5,8,5],[32,6,8,6],[33,2,9,0],[33,3,9,1],[34,2,11,0],[34,8,11,6,"INTEGRATION_NAME"],[34,24,11,22],[34,27,11,25],[34,39,11,37],[35,2,12,0],[36,2,13,7],[36,8,13,13,"screenshotIntegration"],[36,29,13,34],[36,32,13,37,"screenshotIntegration"],[36,33,13,37],[36,38,13,43],[37,4,14,4],[37,11,14,11],[38,6,15,8,"name"],[38,10,15,12],[38,12,15,14,"INTEGRATION_NAME"],[38,28,15,30],[39,6,16,8,"setupOnce"],[39,15,16,17],[39,17,16,19,"setupOnce"],[39,18,16,19],[39,23,16,25],[40,8,17,12],[41,6,17,12],[41,7,18,9],[42,6,19,8,"processEvent"],[43,4,20,4],[43,5,20,5],[44,2,21,0],[44,3,21,1],[45,2,21,2,"exports"],[45,9,21,2],[45,10,21,2,"screenshotIntegration"],[45,31,21,2],[45,34,21,2,"screenshotIntegration"],[45,55,21,2],[46,2,22,0],[46,11,22,9,"processEvent"],[46,23,22,21,"processEvent"],[46,24,22,22,"event"],[46,29,22,27],[46,31,22,29,"hint"],[46,35,22,33],[46,37,22,35,"client"],[46,43,22,41],[46,45,22,43],[47,4,23,4],[47,8,23,8,"_a"],[47,10,23,10],[47,12,23,12,"_b"],[47,14,23,14],[48,4,24,4],[48,11,24,11,"__awaiter"],[48,20,24,20],[48,21,24,21],[48,25,24,25],[48,27,24,27],[48,32,24,32],[48,33,24,33],[48,35,24,35],[48,40,24,40],[48,41,24,41],[48,43,24,43],[48,56,24,56],[49,6,25,8],[49,12,25,14,"hasException"],[49,24,25,26],[49,27,25,29,"event"],[49,32,25,34],[49,33,25,35,"exception"],[49,42,25,44],[49,46,25,48,"event"],[49,51,25,53],[49,52,25,54,"exception"],[49,61,25,63],[49,62,25,64,"values"],[49,68,25,70],[49,72,25,74,"event"],[49,77,25,79],[49,78,25,80,"exception"],[49,87,25,89],[49,88,25,90,"values"],[49,94,25,96],[49,95,25,97,"length"],[49,101,25,103],[49,104,25,106],[49,105,25,107],[50,6,26,8],[50,10,26,12],[50,11,26,13,"hasException"],[50,23,26,25],[50,27,26,29],[50,28,26,30],[50,29,26,31,"_b"],[50,31,26,33],[50,34,26,36],[50,35,26,37,"_a"],[50,37,26,39],[50,40,26,42,"client"],[50,46,26,48],[50,47,26,49,"getOptions"],[50,57,26,59],[50,58,26,60],[50,59,26,61],[50,61,26,63,"beforeScreenshot"],[50,77,26,79],[50,83,26,85],[50,87,26,89],[50,91,26,93,"_b"],[50,93,26,95],[50,98,26,100],[50,103,26,105],[50,104,26,106],[50,107,26,109],[50,112,26,114],[50,113,26,115],[50,116,26,118,"_b"],[50,118,26,120],[50,119,26,121,"call"],[50,123,26,125],[50,124,26,126,"_a"],[50,126,26,128],[50,128,26,130,"event"],[50,133,26,135],[50,135,26,137,"hint"],[50,139,26,141],[50,140,26,142],[50,146,26,148],[50,151,26,153],[50,153,26,155],[51,8,27,12],[51,15,27,19,"event"],[51,20,27,24],[52,6,28,8],[53,6,29,8],[53,12,29,14,"screenshots"],[53,23,29,25],[53,26,29,28],[53,32,29,34,"NATIVE"],[53,47,29,40],[53,48,29,41,"captureScreenshot"],[53,65,29,58],[53,66,29,59],[53,67,29,60],[54,6,30,8],[54,10,30,12,"screenshots"],[54,21,30,23],[54,25,30,27,"screenshots"],[54,36,30,38],[54,37,30,39,"length"],[54,43,30,45],[54,46,30,48],[54,47,30,49],[54,49,30,51],[55,8,31,12,"hint"],[55,12,31,16],[55,13,31,17,"attachments"],[55,24,31,28],[55,27,31,31],[55,28,31,32],[55,31,31,35,"screenshots"],[55,42,31,46],[55,44,31,48],[55,48,31,52],[55,49,31,53,"hint"],[55,53,31,57],[55,58,31,62],[55,62,31,66],[55,66,31,70,"hint"],[55,70,31,74],[55,75,31,79],[55,80,31,84],[55,81,31,85],[55,84,31,88],[55,89,31,93],[55,90,31,94],[55,93,31,97,"hint"],[55,97,31,101],[55,98,31,102,"attachments"],[55,109,31,113],[55,114,31,118],[55,116,31,120],[55,117,31,121],[55,118,31,122],[56,6,32,8],[57,6,33,8],[57,13,33,15,"event"],[57,18,33,20],[58,4,34,4],[58,5,34,5],[58,6,34,6],[59,2,35,0],[60,0,35,1],[60,3]],"functionMap":{"names":["<global>","<anonymous>","adopt","P$argument_0","fulfilled","rejected","step","screenshotIntegration","setupOnce","processEvent","__awaiter$argument_3"],"mappings":"AAA,4CC;ICC,kEC,sCD,ID;QGE,2FH;QIC,8FJ;QKC,8GL;CDG;qCOI;mBCG;SDE;CPG;ASC;2CCE;KDU;CTC"}},"type":"js/module"}]}