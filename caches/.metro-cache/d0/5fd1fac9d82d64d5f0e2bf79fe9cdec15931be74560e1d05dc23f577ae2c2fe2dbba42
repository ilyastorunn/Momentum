{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":128,"index":128}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"]}},{"name":"../onSpanEndUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":129},"end":{"line":2,"column":59,"index":188}}],"key":"ctXLtR73WEDHyoLSdOx4LTXeubg=","exportNames":["*"]}},{"name":"../origin","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":189},"end":{"line":3,"column":59,"index":248}}],"key":"luSBcq2+ru6TAonQ4jCdv7T4uiE=","exportNames":["*"]}},{"name":"../reactnativetracing","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":249},"end":{"line":4,"column":80,"index":329}}],"key":"tRfaILopZKujsc30k+sgn63XQmE=","exportNames":["*"]}},{"name":"../span","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":330},"end":{"line":5,"column":91,"index":421}}],"key":"C3tUfg/sTtF1+hBjX8vCvDsyMk0=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.userInteractionIntegration = exports.startUserInteractionSpan = void 0;\n  var _core = require(_dependencyMap[0], \"@sentry/core\");\n  var _onSpanEndUtils = require(_dependencyMap[1], \"../onSpanEndUtils\");\n  var _origin = require(_dependencyMap[2], \"../origin\");\n  var _reactnativetracing = require(_dependencyMap[3], \"../reactnativetracing\");\n  var _span = require(_dependencyMap[4], \"../span\");\n  const INTEGRATION_NAME = 'UserInteraction';\n  const userInteractionIntegration = () => {\n    return {\n      name: INTEGRATION_NAME\n    };\n  };\n  /**\n   * Starts a new transaction for a user interaction.\n   * @param userInteractionId Consists of `op` representation UI Event and `elementId` unique element identifier on current screen.\n   */\n  exports.userInteractionIntegration = userInteractionIntegration;\n  const startUserInteractionSpan = userInteractionId => {\n    const client = (0, _core.getClient)();\n    if (!client) {\n      return undefined;\n    }\n    const tracing = (0, _reactnativetracing.getCurrentReactNativeTracingIntegration)();\n    if (!tracing) {\n      _core.logger.log(`[${INTEGRATION_NAME}] Tracing integration is not available. Can not start user interaction span.`);\n      return undefined;\n    }\n    const options = client.getOptions();\n    const {\n      elementId,\n      op\n    } = userInteractionId;\n    if (!options.enableUserInteractionTracing) {\n      _core.logger.log(`[${INTEGRATION_NAME}] User Interaction Tracing is disabled.`);\n      return undefined;\n    }\n    if (!elementId) {\n      _core.logger.log(`[${INTEGRATION_NAME}] User Interaction Tracing can not create transaction with undefined elementId.`);\n      return undefined;\n    }\n    if (!tracing.state.currentRoute) {\n      _core.logger.log(`[${INTEGRATION_NAME}] User Interaction Tracing can not create transaction without a current route.`);\n      return undefined;\n    }\n    const activeTransaction = (0, _core.getActiveSpan)();\n    const activeTransactionIsNotInteraction = activeTransaction && !(0, _span.isSentryInteractionSpan)(activeTransaction);\n    if (activeTransaction && activeTransactionIsNotInteraction) {\n      _core.logger.warn(`[${INTEGRATION_NAME}] Did not create ${op} transaction because active transaction ${(0, _core.spanToJSON)(activeTransaction).description} exists on the scope.`);\n      return undefined;\n    }\n    const name = `${tracing.state.currentRoute}.${elementId}`;\n    if (activeTransaction && (0, _core.spanToJSON)(activeTransaction).description === name && (0, _core.spanToJSON)(activeTransaction).op === op) {\n      _core.logger.warn(`[${INTEGRATION_NAME}] Did not create ${op} transaction because it the same transaction ${(0, _core.spanToJSON)(activeTransaction).description} already exists on the scope.`);\n      return undefined;\n    }\n    const scope = (0, _core.getCurrentScope)();\n    const context = {\n      name,\n      op,\n      scope\n    };\n    (0, _span.clearActiveSpanFromScope)(scope);\n    const newSpan = (0, _span.startIdleSpan)(context, {\n      idleTimeout: tracing.options.idleTimeoutMs,\n      finalTimeout: tracing.options.finalTimeoutMs\n    });\n    newSpan.setAttribute(_core.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN, _origin.SPAN_ORIGIN_MANUAL_INTERACTION);\n    (0, _onSpanEndUtils.onlySampleIfChildSpans)(client, newSpan);\n    _core.logger.log(`[${INTEGRATION_NAME}] User Interaction Tracing Created ${op} transaction ${name}.`);\n    return newSpan;\n  };\n  exports.startUserInteractionSpan = startUserInteractionSpan;\n});","lineCount":77,"map":[[6,2,1,0],[6,6,1,0,"_core"],[6,11,1,0],[6,14,1,0,"require"],[6,21,1,0],[6,22,1,0,"_dependencyMap"],[6,36,1,0],[7,2,2,0],[7,6,2,0,"_onSpanEndUtils"],[7,21,2,0],[7,24,2,0,"require"],[7,31,2,0],[7,32,2,0,"_dependencyMap"],[7,46,2,0],[8,2,3,0],[8,6,3,0,"_origin"],[8,13,3,0],[8,16,3,0,"require"],[8,23,3,0],[8,24,3,0,"_dependencyMap"],[8,38,3,0],[9,2,4,0],[9,6,4,0,"_reactnativetracing"],[9,25,4,0],[9,28,4,0,"require"],[9,35,4,0],[9,36,4,0,"_dependencyMap"],[9,50,4,0],[10,2,5,0],[10,6,5,0,"_span"],[10,11,5,0],[10,14,5,0,"require"],[10,21,5,0],[10,22,5,0,"_dependencyMap"],[10,36,5,0],[11,2,6,0],[11,8,6,6,"INTEGRATION_NAME"],[11,24,6,22],[11,27,6,25],[11,44,6,42],[12,2,7,7],[12,8,7,13,"userInteractionIntegration"],[12,34,7,39],[12,37,7,42,"userInteractionIntegration"],[12,38,7,42],[12,43,7,48],[13,4,8,4],[13,11,8,11],[14,6,9,8,"name"],[14,10,9,12],[14,12,9,14,"INTEGRATION_NAME"],[15,4,10,4],[15,5,10,5],[16,2,11,0],[16,3,11,1],[17,2,12,0],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,2,12,0,"exports"],[21,9,12,0],[21,10,12,0,"userInteractionIntegration"],[21,36,12,0],[21,39,12,0,"userInteractionIntegration"],[21,65,12,0],[22,2,16,7],[22,8,16,13,"startUserInteractionSpan"],[22,32,16,37],[22,35,16,41,"userInteractionId"],[22,52,16,58],[22,56,16,63],[23,4,17,4],[23,10,17,10,"client"],[23,16,17,16],[23,19,17,19],[23,23,17,19,"getClient"],[23,38,17,28],[23,40,17,29],[23,41,17,30],[24,4,18,4],[24,8,18,8],[24,9,18,9,"client"],[24,15,18,15],[24,17,18,17],[25,6,19,8],[25,13,19,15,"undefined"],[25,22,19,24],[26,4,20,4],[27,4,21,4],[27,10,21,10,"tracing"],[27,17,21,17],[27,20,21,20],[27,24,21,20,"getCurrentReactNativeTracingIntegration"],[27,83,21,59],[27,85,21,60],[27,86,21,61],[28,4,22,4],[28,8,22,8],[28,9,22,9,"tracing"],[28,16,22,16],[28,18,22,18],[29,6,23,8,"logger"],[29,18,23,14],[29,19,23,15,"log"],[29,22,23,18],[29,23,23,19],[29,27,23,23,"INTEGRATION_NAME"],[29,43,23,39],[29,121,23,117],[29,122,23,118],[30,6,24,8],[30,13,24,15,"undefined"],[30,22,24,24],[31,4,25,4],[32,4,26,4],[32,10,26,10,"options"],[32,17,26,17],[32,20,26,20,"client"],[32,26,26,26],[32,27,26,27,"getOptions"],[32,37,26,37],[32,38,26,38],[32,39,26,39],[33,4,27,4],[33,10,27,10],[34,6,27,12,"elementId"],[34,15,27,21],[35,6,27,23,"op"],[36,4,27,26],[36,5,27,27],[36,8,27,30,"userInteractionId"],[36,25,27,47],[37,4,28,4],[37,8,28,8],[37,9,28,9,"options"],[37,16,28,16],[37,17,28,17,"enableUserInteractionTracing"],[37,45,28,45],[37,47,28,47],[38,6,29,8,"logger"],[38,18,29,14],[38,19,29,15,"log"],[38,22,29,18],[38,23,29,19],[38,27,29,23,"INTEGRATION_NAME"],[38,43,29,39],[38,84,29,80],[38,85,29,81],[39,6,30,8],[39,13,30,15,"undefined"],[39,22,30,24],[40,4,31,4],[41,4,32,4],[41,8,32,8],[41,9,32,9,"elementId"],[41,18,32,18],[41,20,32,20],[42,6,33,8,"logger"],[42,18,33,14],[42,19,33,15,"log"],[42,22,33,18],[42,23,33,19],[42,27,33,23,"INTEGRATION_NAME"],[42,43,33,39],[42,124,33,120],[42,125,33,121],[43,6,34,8],[43,13,34,15,"undefined"],[43,22,34,24],[44,4,35,4],[45,4,36,4],[45,8,36,8],[45,9,36,9,"tracing"],[45,16,36,16],[45,17,36,17,"state"],[45,22,36,22],[45,23,36,23,"currentRoute"],[45,35,36,35],[45,37,36,37],[46,6,37,8,"logger"],[46,18,37,14],[46,19,37,15,"log"],[46,22,37,18],[46,23,37,19],[46,27,37,23,"INTEGRATION_NAME"],[46,43,37,39],[46,123,37,119],[46,124,37,120],[47,6,38,8],[47,13,38,15,"undefined"],[47,22,38,24],[48,4,39,4],[49,4,40,4],[49,10,40,10,"activeTransaction"],[49,27,40,27],[49,30,40,30],[49,34,40,30,"getActiveSpan"],[49,53,40,43],[49,55,40,44],[49,56,40,45],[50,4,41,4],[50,10,41,10,"activeTransactionIsNotInteraction"],[50,43,41,43],[50,46,41,46,"activeTransaction"],[50,63,41,63],[50,67,41,67],[50,68,41,68],[50,72,41,68,"isSentryInteractionSpan"],[50,101,41,91],[50,103,41,92,"activeTransaction"],[50,120,41,109],[50,121,41,110],[51,4,42,4],[51,8,42,8,"activeTransaction"],[51,25,42,25],[51,29,42,29,"activeTransactionIsNotInteraction"],[51,62,42,62],[51,64,42,64],[52,6,43,8,"logger"],[52,18,43,14],[52,19,43,15,"warn"],[52,23,43,19],[52,24,43,20],[52,28,43,24,"INTEGRATION_NAME"],[52,44,43,40],[52,64,43,60,"op"],[52,66,43,62],[52,109,43,105],[52,113,43,105,"spanToJSON"],[52,129,43,115],[52,131,43,116,"activeTransaction"],[52,148,43,133],[52,149,43,134],[52,150,43,135,"description"],[52,161,43,146],[52,184,43,169],[52,185,43,170],[53,6,44,8],[53,13,44,15,"undefined"],[53,22,44,24],[54,4,45,4],[55,4,46,4],[55,10,46,10,"name"],[55,14,46,14],[55,17,46,17],[55,20,46,20,"tracing"],[55,27,46,27],[55,28,46,28,"state"],[55,33,46,33],[55,34,46,34,"currentRoute"],[55,46,46,46],[55,50,46,50,"elementId"],[55,59,46,59],[55,61,46,61],[56,4,47,4],[56,8,47,8,"activeTransaction"],[56,25,47,25],[56,29,48,8],[56,33,48,8,"spanToJSON"],[56,49,48,18],[56,51,48,19,"activeTransaction"],[56,68,48,36],[56,69,48,37],[56,70,48,38,"description"],[56,81,48,49],[56,86,48,54,"name"],[56,90,48,58],[56,94,49,8],[56,98,49,8,"spanToJSON"],[56,114,49,18],[56,116,49,19,"activeTransaction"],[56,133,49,36],[56,134,49,37],[56,135,49,38,"op"],[56,137,49,40],[56,142,49,45,"op"],[56,144,49,47],[56,146,49,49],[57,6,50,8,"logger"],[57,18,50,14],[57,19,50,15,"warn"],[57,23,50,19],[57,24,50,20],[57,28,50,24,"INTEGRATION_NAME"],[57,44,50,40],[57,64,50,60,"op"],[57,66,50,62],[57,114,50,110],[57,118,50,110,"spanToJSON"],[57,134,50,120],[57,136,50,121,"activeTransaction"],[57,153,50,138],[57,154,50,139],[57,155,50,140,"description"],[57,166,50,151],[57,197,50,182],[57,198,50,183],[58,6,51,8],[58,13,51,15,"undefined"],[58,22,51,24],[59,4,52,4],[60,4,53,4],[60,10,53,10,"scope"],[60,15,53,15],[60,18,53,18],[60,22,53,18,"getCurrentScope"],[60,43,53,33],[60,45,53,34],[60,46,53,35],[61,4,54,4],[61,10,54,10,"context"],[61,17,54,17],[61,20,54,20],[62,6,55,8,"name"],[62,10,55,12],[63,6,56,8,"op"],[63,8,56,10],[64,6,57,8,"scope"],[65,4,58,4],[65,5,58,5],[66,4,59,4],[66,8,59,4,"clearActiveSpanFromScope"],[66,38,59,28],[66,40,59,29,"scope"],[66,45,59,34],[66,46,59,35],[67,4,60,4],[67,10,60,10,"newSpan"],[67,17,60,17],[67,20,60,20],[67,24,60,20,"startIdleSpan"],[67,43,60,33],[67,45,60,34,"context"],[67,52,60,41],[67,54,60,43],[68,6,61,8,"idleTimeout"],[68,17,61,19],[68,19,61,21,"tracing"],[68,26,61,28],[68,27,61,29,"options"],[68,34,61,36],[68,35,61,37,"idleTimeoutMs"],[68,48,61,50],[69,6,62,8,"finalTimeout"],[69,18,62,20],[69,20,62,22,"tracing"],[69,27,62,29],[69,28,62,30,"options"],[69,35,62,37],[69,36,62,38,"finalTimeoutMs"],[70,4,63,4],[70,5,63,5],[70,6,63,6],[71,4,64,4,"newSpan"],[71,11,64,11],[71,12,64,12,"setAttribute"],[71,24,64,24],[71,25,64,25,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[71,63,64,57],[71,65,64,59,"SPAN_ORIGIN_MANUAL_INTERACTION"],[71,103,64,89],[71,104,64,90],[72,4,65,4],[72,8,65,4,"onlySampleIfChildSpans"],[72,46,65,26],[72,48,65,27,"client"],[72,54,65,33],[72,56,65,35,"newSpan"],[72,63,65,42],[72,64,65,43],[73,4,66,4,"logger"],[73,16,66,10],[73,17,66,11,"log"],[73,20,66,14],[73,21,66,15],[73,25,66,19,"INTEGRATION_NAME"],[73,41,66,35],[73,79,66,73,"op"],[73,81,66,75],[73,97,66,91,"name"],[73,101,66,95],[73,104,66,98],[73,105,66,99],[74,4,67,4],[74,11,67,11,"newSpan"],[74,18,67,18],[75,2,68,0],[75,3,68,1],[76,2,68,2,"exports"],[76,9,68,2],[76,10,68,2,"startUserInteractionSpan"],[76,34,68,2],[76,37,68,2,"startUserInteractionSpan"],[76,61,68,2],[77,0,68,2],[77,3]],"functionMap":{"names":["<global>","userInteractionIntegration","startUserInteractionSpan"],"mappings":"AAA;0CCM;CDI;wCEK;CFoD"}},"type":"js/module"}]}