{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"]}},{"name":"./networkUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":71,"index":121}}],"key":"K0r0jGDN3xnnNoM2ekIGGvtUzBQ=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.enrichXhrBreadcrumbsForMobileReplay = enrichXhrBreadcrumbsForMobileReplay;\n  var _core = require(_dependencyMap[0], \"@sentry/core\");\n  var _networkUtils = require(_dependencyMap[1], \"./networkUtils\");\n  /**\n   * Enrich an XHR breadcrumb with additional data for Mobile Replay network tab.\n   */\n  function enrichXhrBreadcrumbsForMobileReplay(breadcrumb, hint) {\n    if (breadcrumb.category !== 'xhr' || !hint) {\n      return;\n    }\n    const xhrHint = hint;\n    if (!xhrHint.xhr) {\n      return;\n    }\n    const now = Date.now();\n    const {\n      startTimestamp = now,\n      endTimestamp = now,\n      input,\n      xhr\n    } = xhrHint;\n    const reqSize = (0, _networkUtils.getBodySize)(input);\n    const resSize = xhr.getResponseHeader('content-length') ? (0, _networkUtils.parseContentLengthHeader)(xhr.getResponseHeader('content-length')) : _getBodySize(xhr.response, xhr.responseType);\n    breadcrumb.data = (0, _core.dropUndefinedKeys)(Object.assign({\n      start_timestamp: startTimestamp,\n      end_timestamp: endTimestamp,\n      request_body_size: reqSize,\n      response_body_size: resSize\n    }, breadcrumb.data));\n  }\n  function _getBodySize(body, responseType) {\n    try {\n      const bodyStr = responseType === 'json' && body && typeof body === 'object' ? JSON.stringify(body) : body;\n      return (0, _networkUtils.getBodySize)(bodyStr);\n    } catch (_a) {\n      return undefined;\n    }\n  }\n});","lineCount":43,"map":[[6,2,1,0],[6,6,1,0,"_core"],[6,11,1,0],[6,14,1,0,"require"],[6,21,1,0],[6,22,1,0,"_dependencyMap"],[6,36,1,0],[7,2,2,0],[7,6,2,0,"_networkUtils"],[7,19,2,0],[7,22,2,0,"require"],[7,29,2,0],[7,30,2,0,"_dependencyMap"],[7,44,2,0],[8,2,3,0],[9,0,4,0],[10,0,5,0],[11,2,6,7],[11,11,6,16,"enrichXhrBreadcrumbsForMobileReplay"],[11,46,6,51,"enrichXhrBreadcrumbsForMobileReplay"],[11,47,6,52,"breadcrumb"],[11,57,6,62],[11,59,6,64,"hint"],[11,63,6,68],[11,65,6,70],[12,4,7,4],[12,8,7,8,"breadcrumb"],[12,18,7,18],[12,19,7,19,"category"],[12,27,7,27],[12,32,7,32],[12,37,7,37],[12,41,7,41],[12,42,7,42,"hint"],[12,46,7,46],[12,48,7,48],[13,6,8,8],[14,4,9,4],[15,4,10,4],[15,10,10,10,"xhrHint"],[15,17,10,17],[15,20,10,20,"hint"],[15,24,10,24],[16,4,11,4],[16,8,11,8],[16,9,11,9,"xhrHint"],[16,16,11,16],[16,17,11,17,"xhr"],[16,20,11,20],[16,22,11,22],[17,6,12,8],[18,4,13,4],[19,4,14,4],[19,10,14,10,"now"],[19,13,14,13],[19,16,14,16,"Date"],[19,20,14,20],[19,21,14,21,"now"],[19,24,14,24],[19,25,14,25],[19,26,14,26],[20,4,15,4],[20,10,15,10],[21,6,15,12,"startTimestamp"],[21,20,15,26],[21,23,15,29,"now"],[21,26,15,32],[22,6,15,34,"endTimestamp"],[22,18,15,46],[22,21,15,49,"now"],[22,24,15,52],[23,6,15,54,"input"],[23,11,15,59],[24,6,15,61,"xhr"],[25,4,15,65],[25,5,15,66],[25,8,15,69,"xhrHint"],[25,15,15,76],[26,4,16,4],[26,10,16,10,"reqSize"],[26,17,16,17],[26,20,16,20],[26,24,16,20,"getBodySize"],[26,49,16,31],[26,51,16,32,"input"],[26,56,16,37],[26,57,16,38],[27,4,17,4],[27,10,17,10,"resSize"],[27,17,17,17],[27,20,17,20,"xhr"],[27,23,17,23],[27,24,17,24,"getResponseHeader"],[27,41,17,41],[27,42,17,42],[27,58,17,58],[27,59,17,59],[27,62,18,10],[27,66,18,10,"parseContentLengthHeader"],[27,104,18,34],[27,106,18,35,"xhr"],[27,109,18,38],[27,110,18,39,"getResponseHeader"],[27,127,18,56],[27,128,18,57],[27,144,18,73],[27,145,18,74],[27,146,18,75],[27,149,19,10,"_getBodySize"],[27,161,19,22],[27,162,19,23,"xhr"],[27,165,19,26],[27,166,19,27,"response"],[27,174,19,35],[27,176,19,37,"xhr"],[27,179,19,40],[27,180,19,41,"responseType"],[27,192,19,53],[27,193,19,54],[28,4,20,4,"breadcrumb"],[28,14,20,14],[28,15,20,15,"data"],[28,19,20,19],[28,22,20,22],[28,26,20,22,"dropUndefinedKeys"],[28,49,20,39],[28,51,20,40,"Object"],[28,57,20,46],[28,58,20,47,"assign"],[28,64,20,53],[28,65,20,54],[29,6,20,56,"start_timestamp"],[29,21,20,71],[29,23,20,73,"startTimestamp"],[29,37,20,87],[30,6,20,89,"end_timestamp"],[30,19,20,102],[30,21,20,104,"endTimestamp"],[30,33,20,116],[31,6,20,118,"request_body_size"],[31,23,20,135],[31,25,20,137,"reqSize"],[31,32,20,144],[32,6,20,146,"response_body_size"],[32,24,20,164],[32,26,20,166,"resSize"],[33,4,20,174],[33,5,20,175],[33,7,20,177,"breadcrumb"],[33,17,20,187],[33,18,20,188,"data"],[33,22,20,192],[33,23,20,193],[33,24,20,194],[34,2,21,0],[35,2,22,0],[35,11,22,9,"_getBodySize"],[35,23,22,21,"_getBodySize"],[35,24,22,22,"body"],[35,28,22,26],[35,30,22,28,"responseType"],[35,42,22,40],[35,44,22,42],[36,4,23,4],[36,8,23,8],[37,6,24,8],[37,12,24,14,"bodyStr"],[37,19,24,21],[37,22,24,24,"responseType"],[37,34,24,36],[37,39,24,41],[37,45,24,47],[37,49,24,51,"body"],[37,53,24,55],[37,57,24,59],[37,64,24,66,"body"],[37,68,24,70],[37,73,24,75],[37,81,24,83],[37,84,24,86,"JSON"],[37,88,24,90],[37,89,24,91,"stringify"],[37,98,24,100],[37,99,24,101,"body"],[37,103,24,105],[37,104,24,106],[37,107,24,109,"body"],[37,111,24,113],[38,6,25,8],[38,13,25,15],[38,17,25,15,"getBodySize"],[38,42,25,26],[38,44,25,27,"bodyStr"],[38,51,25,34],[38,52,25,35],[39,4,26,4],[39,5,26,5],[39,6,27,4],[39,13,27,11,"_a"],[39,15,27,13],[39,17,27,15],[40,6,28,8],[40,13,28,15,"undefined"],[40,22,28,24],[41,4,29,4],[42,2,30,0],[43,0,30,1],[43,3]],"functionMap":{"names":["<global>","enrichXhrBreadcrumbsForMobileReplay","_getBodySize"],"mappings":"AAA;OCK;CDe;AEC;CFQ"}},"type":"js/module"}]}