{"dependencies":[{"name":"../integration.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"B8aKvpmafw58aWtupuC7GWTMiwo=","exportNames":["*"]}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":48,"index":103}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"]}},{"name":"../utils-hoist/is.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":62,"index":166}}],"key":"3x1kguMyd34OmCyltgMzanSUMqM=","exportNames":["*"]}},{"name":"../utils-hoist/logger.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":167},"end":{"line":4,"column":50,"index":217}}],"key":"ntkLGOO3yQLxIuhQNqZB03aOwxw=","exportNames":["*"]}},{"name":"../utils-hoist/normalize.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":218},"end":{"line":5,"column":56,"index":274}}],"key":"RZ+I2iXR0yV+iK0qIO5Teki7v88=","exportNames":["*"]}},{"name":"../utils-hoist/object.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":275},"end":{"line":6,"column":68,"index":343}}],"key":"IWRGqGXR51VGNaoabCqwsNvBzK0=","exportNames":["*"]}},{"name":"../utils-hoist/string.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":344},"end":{"line":7,"column":52,"index":396}}],"key":"VIkBXyaUAba9sYYSM7VCyUVEn5M=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.extraErrorDataIntegration = void 0;\n  var _integration = require(_dependencyMap[0], \"../integration.js\");\n  var _debugBuild = require(_dependencyMap[1], \"../debug-build.js\");\n  var _is = require(_dependencyMap[2], \"../utils-hoist/is.js\");\n  var _logger = require(_dependencyMap[3], \"../utils-hoist/logger.js\");\n  var _normalize = require(_dependencyMap[4], \"../utils-hoist/normalize.js\");\n  var _object = require(_dependencyMap[5], \"../utils-hoist/object.js\");\n  var _string = require(_dependencyMap[6], \"../utils-hoist/string.js\");\n  const INTEGRATION_NAME = 'ExtraErrorData';\n\n  /**\n   * Extract additional data for from original exceptions.\n   */\n  const _extraErrorDataIntegration = (options = {}) => {\n    const {\n      depth = 3,\n      captureErrorCause = true\n    } = options;\n    return {\n      name: INTEGRATION_NAME,\n      processEvent(event, hint, client) {\n        const {\n          maxValueLength = 250\n        } = client.getOptions();\n        return _enhanceEventWithErrorData(event, hint, depth, captureErrorCause, maxValueLength);\n      }\n    };\n  };\n  const extraErrorDataIntegration = exports.extraErrorDataIntegration = (0, _integration.defineIntegration)(_extraErrorDataIntegration);\n  function _enhanceEventWithErrorData(event, hint = {}, depth, captureErrorCause, maxValueLength) {\n    if (!hint.originalException || !(0, _is.isError)(hint.originalException)) {\n      return event;\n    }\n    const exceptionName = hint.originalException.name || hint.originalException.constructor.name;\n    const errorData = _extractErrorData(hint.originalException, captureErrorCause, maxValueLength);\n    if (errorData) {\n      const contexts = {\n        ...event.contexts\n      };\n      const normalizedErrorData = (0, _normalize.normalize)(errorData, depth);\n      if ((0, _is.isPlainObject)(normalizedErrorData)) {\n        // We mark the error data as \"already normalized\" here, because we don't want other normalization procedures to\n        // potentially truncate the data we just already normalized, with a certain depth setting.\n        (0, _object.addNonEnumerableProperty)(normalizedErrorData, '__sentry_skip_normalization__', true);\n        contexts[exceptionName] = normalizedErrorData;\n      }\n      return {\n        ...event,\n        contexts\n      };\n    }\n    return event;\n  }\n\n  /**\n   * Extract extra information from the Error object\n   */\n  function _extractErrorData(error, captureErrorCause, maxValueLength) {\n    // We are trying to enhance already existing event, so no harm done if it won't succeed\n    try {\n      const nativeKeys = ['name', 'message', 'stack', 'line', 'column', 'fileName', 'lineNumber', 'columnNumber', 'toJSON'];\n      const extraErrorInfo = {};\n\n      // We want only enumerable properties, thus `getOwnPropertyNames` is redundant here, as we filter keys anyway.\n      for (const key of Object.keys(error)) {\n        if (nativeKeys.indexOf(key) !== -1) {\n          continue;\n        }\n        const value = error[key];\n        extraErrorInfo[key] = (0, _is.isError)(value) || typeof value === 'string' ? (0, _string.truncate)(`${value}`, maxValueLength) : value;\n      }\n\n      // Error.cause is a standard property that is non enumerable, we therefore need to access it separately.\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause\n      if (captureErrorCause && error.cause !== undefined) {\n        extraErrorInfo.cause = (0, _is.isError)(error.cause) ? error.cause.toString() : error.cause;\n      }\n\n      // Check if someone attached `toJSON` method to grab even more properties (eg. axios is doing that)\n      if (typeof error.toJSON === 'function') {\n        const serializedError = error.toJSON();\n        for (const key of Object.keys(serializedError)) {\n          const value = serializedError[key];\n          extraErrorInfo[key] = (0, _is.isError)(value) ? value.toString() : value;\n        }\n      }\n      return extraErrorInfo;\n    } catch (oO) {\n      _debugBuild.DEBUG_BUILD && _logger.logger.error('Unable to extract extra data from the Error object:', oO);\n    }\n    return null;\n  }\n});","lineCount":97,"map":[[6,2,1,0],[6,6,1,0,"_integration"],[6,18,1,0],[6,21,1,0,"require"],[6,28,1,0],[6,29,1,0,"_dependencyMap"],[6,43,1,0],[7,2,2,0],[7,6,2,0,"_debugBuild"],[7,17,2,0],[7,20,2,0,"require"],[7,27,2,0],[7,28,2,0,"_dependencyMap"],[7,42,2,0],[8,2,3,0],[8,6,3,0,"_is"],[8,9,3,0],[8,12,3,0,"require"],[8,19,3,0],[8,20,3,0,"_dependencyMap"],[8,34,3,0],[9,2,4,0],[9,6,4,0,"_logger"],[9,13,4,0],[9,16,4,0,"require"],[9,23,4,0],[9,24,4,0,"_dependencyMap"],[9,38,4,0],[10,2,5,0],[10,6,5,0,"_normalize"],[10,16,5,0],[10,19,5,0,"require"],[10,26,5,0],[10,27,5,0,"_dependencyMap"],[10,41,5,0],[11,2,6,0],[11,6,6,0,"_object"],[11,13,6,0],[11,16,6,0,"require"],[11,23,6,0],[11,24,6,0,"_dependencyMap"],[11,38,6,0],[12,2,7,0],[12,6,7,0,"_string"],[12,13,7,0],[12,16,7,0,"require"],[12,23,7,0],[12,24,7,0,"_dependencyMap"],[12,38,7,0],[13,2,9,0],[13,8,9,6,"INTEGRATION_NAME"],[13,24,9,22],[13,27,9,25],[13,43,9,41],[15,2,11,0],[16,0,12,0],[17,0,13,0],[18,2,14,0],[18,8,14,6,"_extraErrorDataIntegration"],[18,34,14,32],[18,37,14,36,"_extraErrorDataIntegration"],[18,38,14,37,"options"],[18,45,14,44],[18,48,14,47],[18,49,14,48],[18,50,14,49],[18,55,14,54],[19,4,15,2],[19,10,15,8],[20,6,15,10,"depth"],[20,11,15,15],[20,14,15,18],[20,15,15,19],[21,6,15,21,"captureErrorCause"],[21,23,15,38],[21,26,15,41],[22,4,15,46],[22,5,15,47],[22,8,15,50,"options"],[22,15,15,57],[23,4,16,2],[23,11,16,9],[24,6,17,4,"name"],[24,10,17,8],[24,12,17,10,"INTEGRATION_NAME"],[24,28,17,26],[25,6,18,4,"processEvent"],[25,18,18,16,"processEvent"],[25,19,18,17,"event"],[25,24,18,22],[25,26,18,24,"hint"],[25,30,18,28],[25,32,18,30,"client"],[25,38,18,36],[25,40,18,38],[26,8,19,6],[26,14,19,12],[27,10,19,14,"maxValueLength"],[27,24,19,28],[27,27,19,31],[28,8,19,35],[28,9,19,36],[28,12,19,39,"client"],[28,18,19,45],[28,19,19,46,"getOptions"],[28,29,19,56],[28,30,19,57],[28,31,19,58],[29,8,20,6],[29,15,20,13,"_enhanceEventWithErrorData"],[29,41,20,39],[29,42,20,40,"event"],[29,47,20,45],[29,49,20,47,"hint"],[29,53,20,51],[29,55,20,53,"depth"],[29,60,20,58],[29,62,20,60,"captureErrorCause"],[29,79,20,77],[29,81,20,79,"maxValueLength"],[29,95,20,93],[29,96,20,94],[30,6,21,4],[31,4,22,2],[31,5,22,3],[32,2,23,0],[32,3,23,2],[33,2,25,0],[33,8,25,6,"extraErrorDataIntegration"],[33,33,25,31],[33,36,25,31,"exports"],[33,43,25,31],[33,44,25,31,"extraErrorDataIntegration"],[33,69,25,31],[33,72,25,34],[33,76,25,34,"defineIntegration"],[33,106,25,51],[33,108,25,52,"_extraErrorDataIntegration"],[33,134,25,78],[33,135,25,79],[34,2,27,0],[34,11,27,9,"_enhanceEventWithErrorData"],[34,37,27,35,"_enhanceEventWithErrorData"],[34,38,28,2,"event"],[34,43,28,7],[34,45,29,2,"hint"],[34,49,29,6],[34,52,29,9],[34,53,29,10],[34,54,29,11],[34,56,30,2,"depth"],[34,61,30,7],[34,63,31,2,"captureErrorCause"],[34,80,31,19],[34,82,32,2,"maxValueLength"],[34,96,32,16],[34,98,33,2],[35,4,34,2],[35,8,34,6],[35,9,34,7,"hint"],[35,13,34,11],[35,14,34,12,"originalException"],[35,31,34,29],[35,35,34,33],[35,36,34,34],[35,40,34,34,"isError"],[35,51,34,41],[35,53,34,42,"hint"],[35,57,34,46],[35,58,34,47,"originalException"],[35,75,34,64],[35,76,34,65],[35,78,34,67],[36,6,35,4],[36,13,35,11,"event"],[36,18,35,16],[37,4,36,2],[38,4,37,2],[38,10,37,8,"exceptionName"],[38,23,37,21],[38,26,37,25,"hint"],[38,30,37,29],[38,31,37,30,"originalException"],[38,48,37,47],[38,49,37,50,"name"],[38,53,37,54],[38,57,37,58,"hint"],[38,61,37,62],[38,62,37,63,"originalException"],[38,79,37,80],[38,80,37,81,"constructor"],[38,91,37,92],[38,92,37,93,"name"],[38,96,37,97],[39,4,39,2],[39,10,39,8,"errorData"],[39,19,39,17],[39,22,39,20,"_extractErrorData"],[39,39,39,37],[39,40,39,38,"hint"],[39,44,39,42],[39,45,39,43,"originalException"],[39,62,39,60],[39,64,39,63,"captureErrorCause"],[39,81,39,80],[39,83,39,82,"maxValueLength"],[39,97,39,96],[39,98,39,97],[40,4,41,2],[40,8,41,6,"errorData"],[40,17,41,15],[40,19,41,17],[41,6,42,4],[41,12,42,10,"contexts"],[41,20,42,18],[41,23,42,21],[42,8,43,6],[42,11,43,9,"event"],[42,16,43,14],[42,17,43,15,"contexts"],[43,6,44,4],[43,7,44,5],[44,6,46,4],[44,12,46,10,"normalizedErrorData"],[44,31,46,29],[44,34,46,32],[44,38,46,32,"normalize"],[44,58,46,41],[44,60,46,42,"errorData"],[44,69,46,51],[44,71,46,53,"depth"],[44,76,46,58],[44,77,46,59],[45,6,48,4],[45,10,48,8],[45,14,48,8,"isPlainObject"],[45,31,48,21],[45,33,48,22,"normalizedErrorData"],[45,52,48,41],[45,53,48,42],[45,55,48,44],[46,8,49,6],[47,8,50,6],[48,8,51,6],[48,12,51,6,"addNonEnumerableProperty"],[48,44,51,30],[48,46,51,31,"normalizedErrorData"],[48,65,51,50],[48,67,51,52],[48,98,51,83],[48,100,51,85],[48,104,51,89],[48,105,51,90],[49,8,52,6,"contexts"],[49,16,52,14],[49,17,52,15,"exceptionName"],[49,30,52,28],[49,31,52,29],[49,34,52,32,"normalizedErrorData"],[49,53,52,51],[50,6,53,4],[51,6,55,4],[51,13,55,11],[52,8,56,6],[52,11,56,9,"event"],[52,16,56,14],[53,8,57,6,"contexts"],[54,6,58,4],[54,7,58,5],[55,4,59,2],[56,4,61,2],[56,11,61,9,"event"],[56,16,61,14],[57,2,62,0],[59,2,64,0],[60,0,65,0],[61,0,66,0],[62,2,67,0],[62,11,67,9,"_extractErrorData"],[62,28,67,26,"_extractErrorData"],[62,29,68,2,"error"],[62,34,68,7],[62,36,69,2,"captureErrorCause"],[62,53,69,19],[62,55,70,2,"maxValueLength"],[62,69,70,16],[62,71,71,2],[63,4,72,2],[64,4,73,2],[64,8,73,6],[65,6,74,4],[65,12,74,10,"nativeKeys"],[65,22,74,20],[65,25,74,23],[65,26,75,6],[65,32,75,12],[65,34,76,6],[65,43,76,15],[65,45,77,6],[65,52,77,13],[65,54,78,6],[65,60,78,12],[65,62,79,6],[65,70,79,14],[65,72,80,6],[65,82,80,16],[65,84,81,6],[65,96,81,18],[65,98,82,6],[65,112,82,20],[65,114,83,6],[65,122,83,14],[65,123,84,5],[66,6,86,4],[66,12,86,10,"extraErrorInfo"],[66,26,86,24],[66,29,86,27],[66,30,86,28],[66,31,86,29],[68,6,88,4],[69,6,89,4],[69,11,89,9],[69,17,89,15,"key"],[69,20,89,18],[69,24,89,22,"Object"],[69,30,89,28],[69,31,89,29,"keys"],[69,35,89,33],[69,36,89,34,"error"],[69,41,89,39],[69,42,89,40],[69,44,89,42],[70,8,90,6],[70,12,90,10,"nativeKeys"],[70,22,90,20],[70,23,90,21,"indexOf"],[70,30,90,28],[70,31,90,29,"key"],[70,34,90,32],[70,35,90,33],[70,40,90,38],[70,41,90,39],[70,42,90,40],[70,44,90,42],[71,10,91,8],[72,8,92,6],[73,8,93,6],[73,14,93,12,"value"],[73,19,93,17],[73,22,93,20,"error"],[73,27,93,25],[73,28,93,26,"key"],[73,31,93,29],[73,32,93,30],[74,8,94,6,"extraErrorInfo"],[74,22,94,20],[74,23,94,21,"key"],[74,26,94,24],[74,27,94,25],[74,30,94,28],[74,34,94,28,"isError"],[74,45,94,35],[74,47,94,36,"value"],[74,52,94,41],[74,53,94,42],[74,57,94,46],[74,64,94,53,"value"],[74,69,94,58],[74,74,94,63],[74,82,94,71],[74,85,94,74],[74,89,94,74,"truncate"],[74,105,94,82],[74,107,94,83],[74,110,94,86,"value"],[74,115,94,91],[74,117,94,93],[74,119,94,95,"maxValueLength"],[74,133,94,109],[74,134,94,110],[74,137,94,113,"value"],[74,142,94,118],[75,6,95,4],[77,6,97,4],[78,6,98,4],[79,6,99,4],[79,10,99,8,"captureErrorCause"],[79,27,99,25],[79,31,99,29,"error"],[79,36,99,34],[79,37,99,35,"cause"],[79,42,99,40],[79,47,99,45,"undefined"],[79,56,99,54],[79,58,99,56],[80,8,100,6,"extraErrorInfo"],[80,22,100,20],[80,23,100,21,"cause"],[80,28,100,26],[80,31,100,29],[80,35,100,29,"isError"],[80,46,100,36],[80,48,100,37,"error"],[80,53,100,42],[80,54,100,43,"cause"],[80,59,100,48],[80,60,100,49],[80,63,100,52,"error"],[80,68,100,57],[80,69,100,58,"cause"],[80,74,100,63],[80,75,100,64,"toString"],[80,83,100,72],[80,84,100,73],[80,85,100,74],[80,88,100,77,"error"],[80,93,100,82],[80,94,100,83,"cause"],[80,99,100,88],[81,6,101,4],[83,6,103,4],[84,6,104,4],[84,10,104,8],[84,17,104,15,"error"],[84,22,104,20],[84,23,104,21,"toJSON"],[84,29,104,27],[84,34,104,32],[84,44,104,42],[84,46,104,44],[85,8,105,6],[85,14,105,12,"serializedError"],[85,29,105,27],[85,32,105,30,"error"],[85,37,105,35],[85,38,105,36,"toJSON"],[85,44,105,42],[85,45,105,43],[85,46,105,44],[86,8,107,6],[86,13,107,11],[86,19,107,17,"key"],[86,22,107,20],[86,26,107,24,"Object"],[86,32,107,30],[86,33,107,31,"keys"],[86,37,107,35],[86,38,107,36,"serializedError"],[86,53,107,51],[86,54,107,52],[86,56,107,54],[87,10,108,8],[87,16,108,14,"value"],[87,21,108,19],[87,24,108,22,"serializedError"],[87,39,108,37],[87,40,108,38,"key"],[87,43,108,41],[87,44,108,42],[88,10,109,8,"extraErrorInfo"],[88,24,109,22],[88,25,109,23,"key"],[88,28,109,26],[88,29,109,27],[88,32,109,30],[88,36,109,30,"isError"],[88,47,109,37],[88,49,109,38,"value"],[88,54,109,43],[88,55,109,44],[88,58,109,47,"value"],[88,63,109,52],[88,64,109,53,"toString"],[88,72,109,61],[88,73,109,62],[88,74,109,63],[88,77,109,66,"value"],[88,82,109,71],[89,8,110,6],[90,6,111,4],[91,6,113,4],[91,13,113,11,"extraErrorInfo"],[91,27,113,25],[92,4,114,2],[92,5,114,3],[92,6,114,4],[92,13,114,11,"oO"],[92,15,114,13],[92,17,114,15],[93,6,115,4,"DEBUG_BUILD"],[93,29,115,15],[93,33,115,19,"logger"],[93,47,115,25],[93,48,115,26,"error"],[93,53,115,31],[93,54,115,32],[93,107,115,85],[93,109,115,87,"oO"],[93,111,115,89],[93,112,115,90],[94,4,116,2],[95,4,118,2],[95,11,118,9],[95,15,118,13],[96,2,119,0],[97,0,119,1],[97,3]],"functionMap":{"names":["<global>","_extraErrorDataIntegration","processEvent","_enhanceEventWithErrorData","_extractErrorData"],"mappings":"AAA;oCCa;ICI;KDG;CDE;AGI;CHmC;AIK;CJoD"}},"type":"js/module"}]}