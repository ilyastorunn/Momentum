{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":681},"end":{"line":10,"column":38,"index":719}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"]}},{"name":"../wrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":720},"end":{"line":11,"column":36,"index":756}}],"key":"3qo6tWpJLamBuMFs5ex6CktRJQ4=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.viewHierarchyIntegration = void 0;\n  var _core = require(_dependencyMap[0], \"@sentry/core\");\n  var _wrapper = require(_dependencyMap[1], \"../wrapper\");\n  var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  const filename = 'view-hierarchy.json';\n  const contentType = 'application/json';\n  const attachmentType = 'event.view_hierarchy';\n  const INTEGRATION_NAME = 'ViewHierarchy';\n  /** Adds ViewHierarchy to error events */\n  const viewHierarchyIntegration = () => {\n    return {\n      name: INTEGRATION_NAME,\n      setupOnce: () => {\n        // noop\n      },\n      processEvent\n    };\n  };\n  exports.viewHierarchyIntegration = viewHierarchyIntegration;\n  function processEvent(event, hint) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const hasException = event.exception && event.exception.values && event.exception.values.length > 0;\n      if (!hasException) {\n        return event;\n      }\n      let viewHierarchy = null;\n      try {\n        viewHierarchy = yield _wrapper.NATIVE.fetchViewHierarchy();\n      } catch (e) {\n        _core.logger.error('Failed to get view hierarchy from native.', e);\n      }\n      if (viewHierarchy) {\n        hint.attachments = [{\n          filename,\n          contentType,\n          attachmentType,\n          data: viewHierarchy\n        }, ...((hint === null || hint === void 0 ? void 0 : hint.attachments) || [])];\n      }\n      return event;\n    });\n  }\n});","lineCount":73,"map":[[6,2,10,0],[6,6,10,0,"_core"],[6,11,10,0],[6,14,10,0,"require"],[6,21,10,0],[6,22,10,0,"_dependencyMap"],[6,36,10,0],[7,2,11,0],[7,6,11,0,"_wrapper"],[7,14,11,0],[7,17,11,0,"require"],[7,24,11,0],[7,25,11,0,"_dependencyMap"],[7,39,11,0],[8,2,1,0],[8,6,1,4,"__awaiter"],[8,15,1,13],[8,18,1,17],[8,22,1,21],[8,26,1,25],[8,30,1,29],[8,31,1,30,"__awaiter"],[8,40,1,39],[8,44,1,44],[8,54,1,54,"thisArg"],[8,61,1,61],[8,63,1,63,"_arguments"],[8,73,1,73],[8,75,1,75,"P"],[8,76,1,76],[8,78,1,78,"generator"],[8,87,1,87],[8,89,1,89],[9,4,2,4],[9,13,2,13,"adopt"],[9,18,2,18,"adopt"],[9,19,2,19,"value"],[9,24,2,24],[9,26,2,26],[10,6,2,28],[10,13,2,35,"value"],[10,18,2,40],[10,30,2,52,"P"],[10,31,2,53],[10,34,2,56,"value"],[10,39,2,61],[10,42,2,64],[10,46,2,68,"P"],[10,47,2,69],[10,48,2,70],[10,58,2,80,"resolve"],[10,65,2,87],[10,67,2,89],[11,8,2,91,"resolve"],[11,15,2,98],[11,16,2,99,"value"],[11,21,2,104],[11,22,2,105],[12,6,2,107],[12,7,2,108],[12,8,2,109],[13,4,2,111],[14,4,3,4],[14,11,3,11],[14,16,3,16,"P"],[14,17,3,17],[14,22,3,22,"P"],[14,23,3,23],[14,26,3,26,"Promise"],[14,33,3,33],[14,34,3,34],[14,36,3,36],[14,46,3,46,"resolve"],[14,53,3,53],[14,55,3,55,"reject"],[14,61,3,61],[14,63,3,63],[15,6,4,8],[15,15,4,17,"fulfilled"],[15,24,4,26,"fulfilled"],[15,25,4,27,"value"],[15,30,4,32],[15,32,4,34],[16,8,4,36],[16,12,4,40],[17,10,4,42,"step"],[17,14,4,46],[17,15,4,47,"generator"],[17,24,4,56],[17,25,4,57,"next"],[17,29,4,61],[17,30,4,62,"value"],[17,35,4,67],[17,36,4,68],[17,37,4,69],[18,8,4,71],[18,9,4,72],[18,10,4,73],[18,17,4,80,"e"],[18,18,4,81],[18,20,4,83],[19,10,4,85,"reject"],[19,16,4,91],[19,17,4,92,"e"],[19,18,4,93],[19,19,4,94],[20,8,4,96],[21,6,4,98],[22,6,5,8],[22,15,5,17,"rejected"],[22,23,5,25,"rejected"],[22,24,5,26,"value"],[22,29,5,31],[22,31,5,33],[23,8,5,35],[23,12,5,39],[24,10,5,41,"step"],[24,14,5,45],[24,15,5,46,"generator"],[24,24,5,55],[24,25,5,56],[24,32,5,63],[24,33,5,64],[24,34,5,65,"value"],[24,39,5,70],[24,40,5,71],[24,41,5,72],[25,8,5,74],[25,9,5,75],[25,10,5,76],[25,17,5,83,"e"],[25,18,5,84],[25,20,5,86],[26,10,5,88,"reject"],[26,16,5,94],[26,17,5,95,"e"],[26,18,5,96],[26,19,5,97],[27,8,5,99],[28,6,5,101],[29,6,6,8],[29,15,6,17,"step"],[29,19,6,21,"step"],[29,20,6,22,"result"],[29,26,6,28],[29,28,6,30],[30,8,6,32,"result"],[30,14,6,38],[30,15,6,39,"done"],[30,19,6,43],[30,22,6,46,"resolve"],[30,29,6,53],[30,30,6,54,"result"],[30,36,6,60],[30,37,6,61,"value"],[30,42,6,66],[30,43,6,67],[30,46,6,70,"adopt"],[30,51,6,75],[30,52,6,76,"result"],[30,58,6,82],[30,59,6,83,"value"],[30,64,6,88],[30,65,6,89],[30,66,6,90,"then"],[30,70,6,94],[30,71,6,95,"fulfilled"],[30,80,6,104],[30,82,6,106,"rejected"],[30,90,6,114],[30,91,6,115],[31,6,6,117],[32,6,7,8,"step"],[32,10,7,12],[32,11,7,13],[32,12,7,14,"generator"],[32,21,7,23],[32,24,7,26,"generator"],[32,33,7,35],[32,34,7,36,"apply"],[32,39,7,41],[32,40,7,42,"thisArg"],[32,47,7,49],[32,49,7,51,"_arguments"],[32,59,7,61],[32,63,7,65],[32,65,7,67],[32,66,7,68],[32,68,7,70,"next"],[32,72,7,74],[32,73,7,75],[32,74,7,76],[32,75,7,77],[33,4,8,4],[33,5,8,5],[33,6,8,6],[34,2,9,0],[34,3,9,1],[35,2,12,0],[35,8,12,6,"filename"],[35,16,12,14],[35,19,12,17],[35,40,12,38],[36,2,13,0],[36,8,13,6,"contentType"],[36,19,13,17],[36,22,13,20],[36,40,13,38],[37,2,14,0],[37,8,14,6,"attachmentType"],[37,22,14,20],[37,25,14,23],[37,47,14,45],[38,2,15,0],[38,8,15,6,"INTEGRATION_NAME"],[38,24,15,22],[38,27,15,25],[38,42,15,40],[39,2,16,0],[40,2,17,7],[40,8,17,13,"viewHierarchyIntegration"],[40,32,17,37],[40,35,17,40,"viewHierarchyIntegration"],[40,36,17,40],[40,41,17,46],[41,4,18,4],[41,11,18,11],[42,6,19,8,"name"],[42,10,19,12],[42,12,19,14,"INTEGRATION_NAME"],[42,28,19,30],[43,6,20,8,"setupOnce"],[43,15,20,17],[43,17,20,19,"setupOnce"],[43,18,20,19],[43,23,20,25],[44,8,21,12],[45,6,21,12],[45,7,22,9],[46,6,23,8,"processEvent"],[47,4,24,4],[47,5,24,5],[48,2,25,0],[48,3,25,1],[49,2,25,2,"exports"],[49,9,25,2],[49,10,25,2,"viewHierarchyIntegration"],[49,34,25,2],[49,37,25,2,"viewHierarchyIntegration"],[49,61,25,2],[50,2,26,0],[50,11,26,9,"processEvent"],[50,23,26,21,"processEvent"],[50,24,26,22,"event"],[50,29,26,27],[50,31,26,29,"hint"],[50,35,26,33],[50,37,26,35],[51,4,27,4],[51,11,27,11,"__awaiter"],[51,20,27,20],[51,21,27,21],[51,25,27,25],[51,27,27,27],[51,32,27,32],[51,33,27,33],[51,35,27,35],[51,40,27,40],[51,41,27,41],[51,43,27,43],[51,56,27,56],[52,6,28,8],[52,12,28,14,"hasException"],[52,24,28,26],[52,27,28,29,"event"],[52,32,28,34],[52,33,28,35,"exception"],[52,42,28,44],[52,46,28,48,"event"],[52,51,28,53],[52,52,28,54,"exception"],[52,61,28,63],[52,62,28,64,"values"],[52,68,28,70],[52,72,28,74,"event"],[52,77,28,79],[52,78,28,80,"exception"],[52,87,28,89],[52,88,28,90,"values"],[52,94,28,96],[52,95,28,97,"length"],[52,101,28,103],[52,104,28,106],[52,105,28,107],[53,6,29,8],[53,10,29,12],[53,11,29,13,"hasException"],[53,23,29,25],[53,25,29,27],[54,8,30,12],[54,15,30,19,"event"],[54,20,30,24],[55,6,31,8],[56,6,32,8],[56,10,32,12,"viewHierarchy"],[56,23,32,25],[56,26,32,28],[56,30,32,32],[57,6,33,8],[57,10,33,12],[58,8,34,12,"viewHierarchy"],[58,21,34,25],[58,24,34,28],[58,30,34,34,"NATIVE"],[58,45,34,40],[58,46,34,41,"fetchViewHierarchy"],[58,64,34,59],[58,65,34,60],[58,66,34,61],[59,6,35,8],[59,7,35,9],[59,8,36,8],[59,15,36,15,"e"],[59,16,36,16],[59,18,36,18],[60,8,37,12,"logger"],[60,20,37,18],[60,21,37,19,"error"],[60,26,37,24],[60,27,37,25],[60,70,37,68],[60,72,37,70,"e"],[60,73,37,71],[60,74,37,72],[61,6,38,8],[62,6,39,8],[62,10,39,12,"viewHierarchy"],[62,23,39,25],[62,25,39,27],[63,8,40,12,"hint"],[63,12,40,16],[63,13,40,17,"attachments"],[63,24,40,28],[63,27,40,31],[63,28,41,16],[64,10,42,20,"filename"],[64,18,42,28],[65,10,43,20,"contentType"],[65,21,43,31],[66,10,44,20,"attachmentType"],[66,24,44,34],[67,10,45,20,"data"],[67,14,45,24],[67,16,45,26,"viewHierarchy"],[68,8,46,16],[68,9,46,17],[68,11,47,16],[68,15,47,20],[68,16,47,21,"hint"],[68,20,47,25],[68,25,47,30],[68,29,47,34],[68,33,47,38,"hint"],[68,37,47,42],[68,42,47,47],[68,47,47,52],[68,48,47,53],[68,51,47,56],[68,56,47,61],[68,57,47,62],[68,60,47,65,"hint"],[68,64,47,69],[68,65,47,70,"attachments"],[68,76,47,81],[68,81,47,86],[68,83,47,88],[68,84,47,89],[68,85,48,13],[69,6,49,8],[70,6,50,8],[70,13,50,15,"event"],[70,18,50,20],[71,4,51,4],[71,5,51,5],[71,6,51,6],[72,2,52,0],[73,0,52,1],[73,3]],"functionMap":{"names":["<global>","<anonymous>","adopt","P$argument_0","fulfilled","rejected","step","viewHierarchyIntegration","setupOnce","processEvent","__awaiter$argument_3"],"mappings":"AAA,4CC;ICC,kEC,sCD,ID;QGE,2FH;QIC,8FJ;QKC,8GL;CDG;wCOQ;mBCG;SDE;CPG;ASC;2CCC;KDwB;CTC"}},"type":"js/module"}]}